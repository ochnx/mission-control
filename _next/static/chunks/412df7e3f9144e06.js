(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},39951,e=>{"use strict";let t=(0,e.i(75254).default)("list-todo",[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]]);e.s(["ListTodo",()=>t],39951)},10548,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(76639),l=e.i(19455),i=e.i(93479),r=e.i(24687),n=e.i(10204),d=e.i(67489),c=e.i(7471);function o({open:e,onOpenChange:o,onCreated:x,defaultProjectId:u}){let[m,h]=(0,s.useState)(""),[p,j]=(0,s.useState)(""),[g,v]=(0,s.useState)("Oskar"),[f,N]=(0,s.useState)("medium"),[y,b]=(0,s.useState)(""),[S,k]=(0,s.useState)(!1),C=async e=>{if(e.preventDefault(),!m.trim())return;k(!0),await c.supabase.from("mc_tasks").insert({title:m.trim(),description:p.trim(),assignee:g,priority:f,status:"todo",due_date:y||null,project_id:u||null});let t=m.trim();h(""),j(""),v("Oskar"),N("medium"),b(""),k(!1),o(!1),x(t)};return(0,t.jsx)(a.Dialog,{open:e,onOpenChange:o,children:(0,t.jsxs)(a.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(a.DialogHeader,{children:(0,t.jsx)(a.DialogTitle,{children:"New Task"})}),(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"title",children:"Title"}),(0,t.jsx)(i.Input,{id:"title",value:m,onChange:e=>h(e.target.value),placeholder:"What needs to be done?",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"desc",children:"Description"}),(0,t.jsx)(r.Textarea,{id:"desc",value:p,onChange:e=>j(e.target.value),placeholder:"Optional details...",rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"Assignee"}),(0,t.jsxs)(d.Select,{value:g,onValueChange:v,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"Oskar",children:"Oskar"}),(0,t.jsx)(d.SelectItem,{value:"Agent",children:"Agent"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"Priority"}),(0,t.jsxs)(d.Select,{value:f,onValueChange:N,children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"high",children:"High"}),(0,t.jsx)(d.SelectItem,{value:"medium",children:"Medium"}),(0,t.jsx)(d.SelectItem,{value:"low",children:"Low"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"due",children:"Due Date"}),(0,t.jsx)(i.Input,{id:"due",type:"date",value:y,onChange:e=>b(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(l.Button,{type:"button",variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),(0,t.jsx)(l.Button,{type:"submit",disabled:S||!m.trim(),children:S?"Creating...":"Create Task"})]})]})]})})}e.s(["CreateTaskDialog",()=>o])},63936,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(7471),l=e.i(1851),i=e.i(75505),r=e.i(39951),n=e.i(27612),d=e.i(78583),c=e.i(87486),o=e.i(19455),x=e.i(46798),u=e.i(75157);let m={idea:"bg-slate-500/10 text-slate-400 border-slate-500/20",planned:"bg-blue-500/10 text-blue-400 border-blue-500/20",active:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20",paused:"bg-amber-500/10 text-amber-400 border-amber-500/20",done:"bg-purple-500/10 text-purple-400 border-purple-500/20"};function h({project:e,onUpdated:h,onClick:p}){let[j,g]=(0,s.useState)(!1),v=async()=>{await a.supabase.from("mc_projects").delete().eq("id",e.id),h()},f=async t=>{t.stopPropagation(),g(!0),await a.supabase.from("mc_agent_commands").insert({command_type:"generate_report",target_type:"project",target_id:e.id,parameters:{name:e.name,status:e.status}}),g(!1)};return(0,t.jsxs)("div",{className:"glass-card rounded-lg p-4 group hover:border-primary/20 transition-all cursor-pointer",onClick:p,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(i.FolderOpen,{className:"w-4 h-4 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold",children:e.name}),(0,t.jsx)(c.Badge,{variant:"outline",className:(0,u.cn)("text-[10px] mt-0.5 capitalize",m[e.status]),children:e.status})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(x.Tooltip,{children:[(0,t.jsx)(x.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",className:"w-6 h-6 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-primary",onClick:f,disabled:j,children:(0,t.jsx)(d.FileText,{className:"w-3 h-3"})})}),(0,t.jsx)(x.TooltipContent,{side:"top",className:"text-xs",children:"Generate Report"})]}),(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",className:"w-6 h-6 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-destructive",onClick:e=>{e.stopPropagation(),v()},children:(0,t.jsx)(n.Trash2,{className:"w-3 h-3"})})]})]}),e.description&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-3 line-clamp-3",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(r.ListTodo,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:[e.tasks_count||0," tasks"]})]}),(0,t.jsxs)("span",{children:["Updated ",(0,l.format)(new Date(e.updated_at),"MMM d")]})]})]})}var p=e.i(76639),j=e.i(93479),g=e.i(24687),v=e.i(10204),f=e.i(67489);function N({open:e,onOpenChange:l,onCreated:i}){let[r,n]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[x,u]=(0,s.useState)("idea"),[m,h]=(0,s.useState)(!1),N=async e=>{e.preventDefault(),r.trim()&&(h(!0),await a.supabase.from("mc_projects").insert({name:r.trim(),description:d.trim(),status:x}),n(""),c(""),u("idea"),h(!1),l(!1),i())};return(0,t.jsx)(p.Dialog,{open:e,onOpenChange:l,children:(0,t.jsxs)(p.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(p.DialogHeader,{children:(0,t.jsx)(p.DialogTitle,{children:"New Project"})}),(0,t.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.Label,{htmlFor:"projname",children:"Name"}),(0,t.jsx)(j.Input,{id:"projname",value:r,onChange:e=>n(e.target.value),placeholder:"Project name",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.Label,{htmlFor:"projdesc",children:"Description"}),(0,t.jsx)(g.Textarea,{id:"projdesc",value:d,onChange:e=>c(e.target.value),placeholder:"What's this project about?",rows:3})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.Label,{children:"Status"}),(0,t.jsxs)(f.Select,{value:x,onValueChange:u,children:[(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"idea",children:"Idea"}),(0,t.jsx)(f.SelectItem,{value:"planned",children:"Planned"}),(0,t.jsx)(f.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(f.SelectItem,{value:"paused",children:"Paused"}),(0,t.jsx)(f.SelectItem,{value:"done",children:"Done"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(o.Button,{type:"button",variant:"ghost",onClick:()=>l(!1),children:"Cancel"}),(0,t.jsx)(o.Button,{type:"submit",disabled:m||!r.trim(),children:m?"Creating...":"Create Project"})]})]})]})})}var y=e.i(20278),b=e.i(7233),S=e.i(10548),k=e.i(18566);let C={active:"text-emerald-400",planned:"text-blue-400",idea:"text-yellow-400",paused:"text-zinc-400",done:"text-purple-400"},w={todo:"text-zinc-400",in_progress:"text-blue-400",done:"text-emerald-400"};function D({project:e,open:l,onOpenChange:i,onUpdated:r}){let n=(0,k.useRouter)(),[d,x]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),[h,N]=(0,s.useState)("idea"),[D,T]=(0,s.useState)(""),[_,L]=(0,s.useState)(""),[I,P]=(0,s.useState)(!1),[B,F]=(0,s.useState)([]),[M,O]=(0,s.useState)(!1),z=(0,s.useCallback)(async e=>{let{data:t}=await a.supabase.from("mc_tasks").select("*").eq("project_id",e).order("created_at",{ascending:!1});F(t||[])},[]);if((0,s.useEffect)(()=>{e&&(m(e.name||""),N(e.status),T(e.description||""),L(e.notes||""),x(!1),z(e.id))},[e,z]),!e)return null;let V=B.filter(e=>"done"===e.status).length,A=B.filter(e=>"todo"===e.status).length,H=B.filter(e=>"in_progress"===e.status).length,U=[];V>0&&U.push(`${V} done`),H>0&&U.push(`${H} in progress`),A>0&&U.push(`${A} todo`);let q=async()=>{P(!0),await a.supabase.from("mc_projects").update({name:u.trim(),status:h,description:D.trim(),notes:_.trim()}).eq("id",e.id),P(!1),x(!1),r()},$=async()=>{await a.supabase.from("mc_projects").delete().eq("id",e.id),i(!1),r()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Dialog,{open:l,onOpenChange:i,children:(0,t.jsxs)(p.DialogContent,{className:"sm:max-w-lg max-h-[85vh] overflow-y-auto",children:[(0,t.jsxs)(p.DialogHeader,{children:[(0,t.jsx)(p.DialogTitle,{children:d?"Edit Project":e.name}),(0,t.jsx)(p.DialogDescription,{children:!d&&(0,t.jsxs)("span",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(c.Badge,{variant:"outline",className:`capitalize ${C[e.status]}`,children:e.status}),B.length>0&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[B.length," task",1!==B.length?"s":"",U.length>0&&` (${U.join(", ")})`]})]})})]}),d?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.Label,{htmlFor:"edit-name",children:"Name"}),(0,t.jsx)(j.Input,{id:"edit-name",value:u,onChange:e=>m(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.Label,{children:"Status"}),(0,t.jsxs)(f.Select,{value:h,onValueChange:e=>N(e),children:[(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"idea",children:"Idea"}),(0,t.jsx)(f.SelectItem,{value:"planned",children:"Planned"}),(0,t.jsx)(f.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(f.SelectItem,{value:"paused",children:"Paused"}),(0,t.jsx)(f.SelectItem,{value:"done",children:"Done"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.Label,{htmlFor:"edit-desc",children:"Description"}),(0,t.jsx)(g.Textarea,{id:"edit-desc",value:D,onChange:e=>T(e.target.value),rows:3})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(v.Label,{htmlFor:"edit-notes",children:"Notes"}),(0,t.jsx)(g.Textarea,{id:"edit-notes",value:_,onChange:e=>L(e.target.value),rows:4})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[e.description&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(v.Label,{className:"text-muted-foreground text-xs",children:"Description"}),(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.description})]}),e.notes&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(v.Label,{className:"text-muted-foreground text-xs",children:"Notes"}),(0,t.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.notes})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(v.Label,{className:"text-muted-foreground text-xs",children:"Created"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(v.Label,{className:"text-muted-foreground text-xs",children:"Last Updated"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.updated_at).toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-2 border-t border-border",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.Target,{className:"w-3.5 h-3.5 text-muted-foreground"}),(0,t.jsx)(v.Label,{className:"text-muted-foreground text-xs",children:"Tasks"})]}),(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>O(!0),children:[(0,t.jsx)(b.Plus,{className:"w-3 h-3 mr-1"}),"Add Task"]})]}),B.length>0?(0,t.jsx)("div",{className:"space-y-1",children:B.map(e=>(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.id,void(i(!1),n.push(`/tasks?task=${t}`))},className:"flex items-center justify-between w-full text-left text-sm px-2 py-1.5 rounded-md hover:bg-muted/50 transition-colors",children:[(0,t.jsx)("span",{className:"truncate mr-2",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 shrink-0",children:[(0,t.jsx)(c.Badge,{variant:"outline",className:`text-[10px] px-1.5 py-0 capitalize ${w[e.status]}`,children:e.status.replace("_"," ")}),(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground",children:e.assignee}),e.due_date&&(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground",children:new Date(e.due_date).toLocaleDateString()})]})]},e.id))}):(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"No tasks linked to this project"})]})]}),(0,t.jsx)(p.DialogFooter,{children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Button,{variant:"ghost",onClick:()=>x(!1),children:"Cancel"}),(0,t.jsx)(o.Button,{onClick:q,disabled:I||!u.trim(),children:I?"Saving...":"Save"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Button,{variant:"destructive",onClick:$,children:"Delete"}),(0,t.jsx)(o.Button,{onClick:()=>x(!0),children:"Edit"})]})})]})}),(0,t.jsx)(S.CreateTaskDialog,{open:M,onOpenChange:O,onCreated:()=>{z(e.id),r()},defaultProjectId:e.id})]})}let T=["all","active","planned","idea","paused","done"];function _(){let[e,l]=(0,s.useState)([]),[i,r]=(0,s.useState)(!0),[n,d]=(0,s.useState)("all"),[x,m]=(0,s.useState)(!1),[p,j]=(0,s.useState)(null),[g,v]=(0,s.useState)(!1),f=(0,s.useCallback)(async()=>{let e=a.supabase.from("mc_projects").select("*").order("updated_at",{ascending:!1});"all"!==n&&(e=e.eq("status",n));let{data:t}=await e;if(t){let e=t.map(e=>e.id),{data:s}=await a.supabase.from("mc_tasks").select("project_id").in("project_id",e),i={};s?.forEach(e=>{e.project_id&&(i[e.project_id]=(i[e.project_id]||0)+1)}),l(t.map(e=>({...e,tasks_count:i[e.id]||0})))}r(!1)},[n]);(0,s.useEffect)(()=>{f()},[f]);let y=e.filter(e=>"active"===e.status||"planned"===e.status),S=e.filter(e=>"idea"===e.status),k=e.filter(e=>"paused"===e.status||"done"===e.status);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Projects"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Track all your projects, from ideas to completion"})]}),(0,t.jsxs)(o.Button,{onClick:()=>m(!0),className:"gap-2",children:[(0,t.jsx)(b.Plus,{className:"w-4 h-4"}),"New Project"]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:T.map(e=>(0,t.jsx)(c.Badge,{variant:n===e?"default":"outline",className:(0,u.cn)("cursor-pointer transition-colors capitalize",n===e&&"bg-primary text-primary-foreground"),onClick:()=>d(e),children:e},e))}),i?(0,t.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"Loading projects..."}):(0,t.jsxs)("div",{className:"space-y-8",children:[y.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Active & Planned"}),(0,t.jsx)("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:y.map(e=>(0,t.jsx)(h,{project:e,onUpdated:f,onClick:()=>{j(e),v(!0)}},e.id))})]}),S.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Backlog / Ideas"}),(0,t.jsx)("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:S.map(e=>(0,t.jsx)(h,{project:e,onUpdated:f,onClick:()=>{j(e),v(!0)}},e.id))})]}),k.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Paused & Done"}),(0,t.jsx)("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:k.map(e=>(0,t.jsx)(h,{project:e,onUpdated:f,onClick:()=>{j(e),v(!0)}},e.id))})]}),0===e.length&&(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground",children:(0,t.jsx)("p",{className:"text-sm",children:"No projects found"})})]}),(0,t.jsx)(N,{open:x,onOpenChange:m,onCreated:f}),(0,t.jsx)(D,{project:p,open:g,onOpenChange:v,onUpdated:f})]})}e.s(["default",()=>_],63936)}]);