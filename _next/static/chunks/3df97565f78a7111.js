(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38763,e=>{"use strict";var t=e.i(71645);function a(e,s=1e4){let[i,n]=(0,t.useState)(null),l=(0,t.useRef)(e);l.current=e;let o=(0,t.useCallback)(async()=>{await l.current(),n(new Date)},[]);return(0,t.useEffect)(()=>{o();let e=null,t=()=>{e||(e=setInterval(o,s))},a=()=>{e&&(clearInterval(e),e=null)},i=()=>{"visible"===document.visibilityState?(o(),t()):a()};return"visible"===document.visibilityState&&t(),document.addEventListener("visibilitychange",i),()=>{a(),document.removeEventListener("visibilitychange",i)}},[o,s]),{lastUpdated:i}}e.s(["usePolling",()=>a])},11317,99035,e=>{"use strict";var t=e.i(71645);async function a(e){try{let t=await fetch("https://mac-mini-von-oskar.tail31e8e5.ts.net/wake",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer geheim"},body:JSON.stringify({text:`MC action: ${e}`}),signal:AbortSignal.timeout(5e3)});if(!t.ok)return console.warn(`[wake] failed: ${t.status} ${t.statusText}`),!1;let a=await t.json();return console.log("[wake] success:",a),!0===a.ok}catch(e){return console.warn("[wake] error:",e),!1}}function s(){let[e,s]=(0,t.useState)(!1);return{wake:(0,t.useCallback)(e=>{a(e).then(e=>{e&&(s(!0),setTimeout(()=>s(!1),2e3))})},[]),toastVisible:e}}e.s(["useWake",()=>s],11317);var i=e.i(43476);function n({visible:e}){return e?(0,i.jsx)("div",{className:"fixed bottom-6 right-6 z-50 animate-in fade-in slide-in-from-bottom-2 duration-300",children:(0,i.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-500/15 border border-green-500/30 text-green-400 text-sm font-medium shadow-lg backdrop-blur-sm",children:[(0,i.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),"Agent notified"]})}):null}e.s(["WakeToast",()=>n],99035)},80376,e=>{"use strict";var t=e.i(43476),a=e.i(95926),s=e.i(64053),i=e.i(75157);function n({...e}){return(0,t.jsx)(s.Dialog.Root,{"data-slot":"sheet",...e})}function l({...e}){return(0,t.jsx)(s.Dialog.Portal,{"data-slot":"sheet-portal",...e})}function o({className:e,...a}){return(0,t.jsx)(s.Dialog.Overlay,{"data-slot":"sheet-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function r({className:e,children:n,side:r="right",showCloseButton:c=!0,...d}){return(0,t.jsxs)(l,{children:[(0,t.jsx)(o,{}),(0,t.jsxs)(s.Dialog.Content,{"data-slot":"sheet-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...d,children:[n,c&&(0,t.jsxs)(s.Dialog.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,t.jsx)(a.XIcon,{className:"size-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"sheet-header",className:(0,i.cn)("flex flex-col gap-1.5 p-4",e),...a})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"sheet-footer",className:(0,i.cn)("mt-auto flex flex-col gap-2 p-4",e),...a})}function u({className:e,...a}){return(0,t.jsx)(s.Dialog.Title,{"data-slot":"sheet-title",className:(0,i.cn)("text-foreground font-semibold",e),...a})}function h({className:e,...a}){return(0,t.jsx)(s.Dialog.Description,{"data-slot":"sheet-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...a})}e.s(["Sheet",()=>n,"SheetContent",()=>r,"SheetDescription",()=>h,"SheetFooter",()=>d,"SheetHeader",()=>c,"SheetTitle",()=>u])},10548,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(76639),i=e.i(19455),n=e.i(93479),l=e.i(24687),o=e.i(10204),r=e.i(67489),c=e.i(7471);function d({open:e,onOpenChange:d,onCreated:u,defaultProjectId:h}){let[m,g]=(0,a.useState)(""),[x,f]=(0,a.useState)(""),[p,j]=(0,a.useState)("Oskar"),[b,v]=(0,a.useState)("medium"),[S,y]=(0,a.useState)(""),[k,w]=(0,a.useState)(!1),C=async e=>{if(e.preventDefault(),!m.trim())return;w(!0),await c.supabase.from("mc_tasks").insert({title:m.trim(),description:x.trim(),assignee:p,priority:b,status:"todo",due_date:S||null,project_id:h||null});let t=m.trim();g(""),f(""),j("Oskar"),v("medium"),y(""),w(!1),d(!1),u(t)};return(0,t.jsx)(s.Dialog,{open:e,onOpenChange:d,children:(0,t.jsxs)(s.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsx)(s.DialogHeader,{children:(0,t.jsx)(s.DialogTitle,{children:"New Task"})}),(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"title",children:"Title"}),(0,t.jsx)(n.Input,{id:"title",value:m,onChange:e=>g(e.target.value),placeholder:"What needs to be done?",autoFocus:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"desc",children:"Description"}),(0,t.jsx)(l.Textarea,{id:"desc",value:x,onChange:e=>f(e.target.value),placeholder:"Optional details...",rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Assignee"}),(0,t.jsxs)(r.Select,{value:p,onValueChange:j,children:[(0,t.jsx)(r.SelectTrigger,{children:(0,t.jsx)(r.SelectValue,{})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"Oskar",children:"Oskar"}),(0,t.jsx)(r.SelectItem,{value:"Agent",children:"Agent"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{children:"Priority"}),(0,t.jsxs)(r.Select,{value:b,onValueChange:v,children:[(0,t.jsx)(r.SelectTrigger,{children:(0,t.jsx)(r.SelectValue,{})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"high",children:"High"}),(0,t.jsx)(r.SelectItem,{value:"medium",children:"Medium"}),(0,t.jsx)(r.SelectItem,{value:"low",children:"Low"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"due",children:"Due Date"}),(0,t.jsx)(n.Input,{id:"due",type:"date",value:S,onChange:e=>y(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(i.Button,{type:"button",variant:"ghost",onClick:()=>d(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{type:"submit",disabled:k||!m.trim(),children:k?"Creating...":"Create Task"})]})]})]})})}e.s(["CreateTaskDialog",()=>d])}]);