(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return s},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return i}};for(var l in n)Object.defineProperty(r,l,{enumerable:!0,get:n[l]});function a(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,o(e));else t.set(r,o(n));return t}function s(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return i},formatWithValidation:function(){return u},urlObjectKeys:function(){return s}};for(var l in n)Object.defineProperty(r,l,{enumerable:!0,get:n[l]});let a=e.r(90809)._(e.r(98183)),o=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:r}=e,n=e.protocol||"",l=e.pathname||"",i=e.hash||"",s=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(u+=":"+e.port)),s&&"object"==typeof s&&(s=String(a.urlQueryToSearchParams(s)));let c=e.search||s&&`?${s}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||o.test(n))&&!1!==u?(u="//"+(u||""),l&&"/"!==l[0]&&(l="/"+l)):u||(u=""),i&&"#"!==i[0]&&(i="#"+i),c&&"?"!==c[0]&&(c="?"+c),l=l.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${n}${u}${l}${c}${i}`}let s=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function u(e){return i(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return l}});let n=e.r(71645);function l(e,t){let r=(0,n.useRef)(null),l=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(r.current=a(e,n)),t&&(l.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return v},MiddlewareNotFoundError:function(){return k},MissingStaticPage:function(){return b},NormalizeError:function(){return x},PageNotFoundError:function(){return y},SP:function(){return h},ST:function(){return g},WEB_VITALS:function(){return a},execOnce:function(){return o},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return c},isAbsoluteUrl:function(){return s},isResSent:function(){return f},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return m},stringifyError:function(){return j}};for(var l in n)Object.defineProperty(r,l,{enumerable:!0,get:n[l]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=e=>i.test(e);function u(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=u();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function m(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&f(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let h="u">typeof performance,g=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class v extends Error{}class x extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class b extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class k extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function j(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return a}});let n=e.r(18967),l=e.r(52817);function a(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,l.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return v},useLinkStatus:function(){return y}};for(var l in n)Object.defineProperty(r,l,{enumerable:!0,get:n[l]});let a=e.r(90809),o=e.r(43476),i=a._(e.r(71645)),s=e.r(95057),u=e.r(8372),c=e.r(18581),d=e.r(18967),f=e.r(5550);e.r(33525);let m=e.r(91949),p=e.r(73668),h=e.r(9396);function g(e){return"string"==typeof e?e:(0,s.formatUrl)(e)}function v(t){var r;let n,l,a,[s,v]=(0,i.useOptimistic)(m.IDLE_LINK_STATUS),y=(0,i.useRef)(null),{href:b,as:k,children:j,prefetch:w=null,passHref:E,replace:C,shallow:S,scroll:N,onClick:P,onMouseEnter:_,onTouchStart:R,legacyBehavior:I=!1,onNavigate:A,ref:O,unstable_dynamicOnHover:T,...M}=t;n=j,I&&("string"==typeof n||"number"==typeof n)&&(n=(0,o.jsx)("a",{children:n}));let $=i.default.useContext(u.AppRouterContext),L=!1!==w,D=!1!==w?null===(r=w)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:F,as:U}=i.default.useMemo(()=>{let e=g(b);return{href:e,as:k?g(k):e}},[b,k]);if(I){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});l=i.default.Children.only(n)}let B=I?l&&"object"==typeof l&&l.ref:O,K=i.default.useCallback(e=>(null!==$&&(y.current=(0,m.mountLinkInstance)(e,F,$,D,L,v)),()=>{y.current&&((0,m.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,m.unmountPrefetchableInstance)(e)}),[L,F,$,D,v]),z={ref:(0,c.useMergedRef)(K,B),onClick(t){I||"function"!=typeof P||P(t),I&&l.props&&"function"==typeof l.props.onClick&&l.props.onClick(t),!$||t.defaultPrevented||function(t,r,n,l,a,o,s){if("u">typeof window){let u,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((u=t.currentTarget.getAttribute("target"))&&"_self"!==u||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(r)){a&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),s){let e=!1;if(s({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(99781);i.default.startTransition(()=>{d(n||r,a?"replace":"push",o??!0,l.current)})}}(t,F,U,y,C,N,A)},onMouseEnter(e){I||"function"!=typeof _||_(e),I&&l.props&&"function"==typeof l.props.onMouseEnter&&l.props.onMouseEnter(e),$&&L&&(0,m.onNavigationIntent)(e.currentTarget,!0===T)},onTouchStart:function(e){I||"function"!=typeof R||R(e),I&&l.props&&"function"==typeof l.props.onTouchStart&&l.props.onTouchStart(e),$&&L&&(0,m.onNavigationIntent)(e.currentTarget,!0===T)}};return(0,d.isAbsoluteUrl)(U)?z.href=U:I&&!E&&("a"!==l.type||"href"in l.props)||(z.href=(0,f.addBasePath)(U)),a=I?i.default.cloneElement(l,z):(0,o.jsx)("a",{...M,...z,children:n}),(0,o.jsx)(x.Provider,{value:s,children:a})}e.r(84508);let x=(0,i.createContext)(m.IDLE_LINK_STATUS),y=()=>(0,i.useContext)(x);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},44787,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(22016),l=e.i(18566),a=e.i(20278),o=e.i(55711),i=e.i(87316),s=e.i(61911),u=e.i(75505),c=e.i(73375),d=e.i(63059),f=e.i(39312),m=e.i(75254);let p=(0,m.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var h=e.i(21218),g=e.i(3116),v=e.i(68054),x=e.i(75157),y=e.i(46798);let b=[{key:"home",label:"Command Center",icon:p,href:"/",emoji:"ðŸ "},{key:"tasks",label:"Tasks",icon:a.Target,href:"/tasks",emoji:"ðŸŽ¯"},{key:"memory",label:"Second Brain",icon:o.Brain,href:"/memory",emoji:"ðŸ§ "},{key:"calendar",label:"Calendar",icon:i.Calendar,href:"/calendar",emoji:"ðŸ“…"},{key:"people",label:"People",icon:s.Users,href:"/people",emoji:"ðŸ‘¥"},{key:"projects",label:"Projects",icon:u.FolderOpen,href:"/projects",emoji:"ðŸ“"},{key:"activity",label:"Activity",icon:h.Activity,href:"/activity",emoji:"ðŸ“Š"},{key:"timeline",label:"Timeline",icon:g.Clock,href:"/timeline",emoji:"â°"},{key:"commands",label:"Commands",icon:v.Terminal,href:"/commands",emoji:"âš¡"}];function k({onNavigate:e}){let a=(0,l.usePathname)(),[o,i]=(0,r.useState)(!1);return(0,t.jsxs)("aside",{className:(0,x.cn)("flex flex-col h-screen border-r border-border bg-sidebar transition-all duration-300 ease-in-out",o?"w-[68px]":"w-[240px]"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 h-14 border-b border-border",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary/10",children:(0,t.jsx)(f.Zap,{className:"w-4 h-4 text-primary"})}),!o&&(0,t.jsx)("span",{className:"text-sm font-semibold tracking-tight whitespace-nowrap",children:"Mission Control"})]}),(0,t.jsx)("nav",{className:"flex-1 py-4 px-2 space-y-1",children:b.map(r=>{let l="/"===r.href?"/"===a:a.startsWith(r.href),i=(0,t.jsxs)(n.default,{href:r.href,onClick:e,className:(0,x.cn)("flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 min-h-[44px]","hover:bg-accent hover:text-accent-foreground",l?"bg-primary/10 text-primary":"text-muted-foreground"),children:[(0,t.jsx)(r.icon,{className:"w-4 h-4 shrink-0"}),!o&&(0,t.jsx)("span",{className:"whitespace-nowrap",children:r.label})]},r.key);return o?(0,t.jsxs)(y.Tooltip,{delayDuration:0,children:[(0,t.jsx)(y.TooltipTrigger,{asChild:!0,children:i}),(0,t.jsx)(y.TooltipContent,{side:"right",className:"text-xs",children:r.label})]},r.key):i})}),(0,t.jsx)("div",{className:"p-2 border-t border-border",children:(0,t.jsx)("button",{onClick:()=>i(!o),className:"flex items-center justify-center w-full p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:o?(0,t.jsx)(d.ChevronRight,{className:"w-4 h-4"}):(0,t.jsx)(c.ChevronLeft,{className:"w-4 h-4"})})})]})}var j=e.i(55436),w=e.i(45423);let E=(0,m.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var C=e.i(19455);let S={"/":"Command Center","/tasks":"Tasks","/memory":"Second Brain","/calendar":"Calendar & Reminders","/people":"People","/projects":"Projects","/activity":"Activity Log","/graph":"Knowledge Graph","/timeline":"Timeline","/commands":"Commands"};function N({onOpenSearch:e,onToggleSidebar:r}){let n=S[(0,l.usePathname)()]||"Dashboard";return(0,t.jsxs)("header",{className:"flex items-center justify-between h-14 px-4 md:px-6 border-b border-border bg-background/80 backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.Button,{variant:"ghost",size:"icon",className:"md:hidden text-muted-foreground hover:text-foreground min-w-[44px] min-h-[44px]",onClick:r,children:(0,t.jsx)(E,{className:"w-5 h-5"})}),(0,t.jsx)("h1",{className:"text-sm font-semibold",children:n})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 md:gap-2",children:[(0,t.jsxs)(C.Button,{variant:"ghost",size:"sm",onClick:e,className:"gap-2 text-muted-foreground hover:text-foreground min-h-[44px] md:min-h-0",children:[(0,t.jsx)(j.Search,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-xs hidden sm:inline",children:"Search"}),(0,t.jsx)("kbd",{className:"ml-2 hidden sm:inline-flex h-5 items-center gap-1 rounded border border-border bg-muted px-1.5 font-mono text-[10px] text-muted-foreground",children:"âŒ˜K"})]}),(0,t.jsxs)(C.Button,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-foreground relative min-w-[44px] min-h-[44px]",children:[(0,t.jsx)(w.Bell,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 rounded-full bg-primary"})]})]})]})}var P=/[\\\/_+.#"@\[\(\{&]/,_=/[\\\/_+.#"@\[\(\{&]/g,R=/[\s-]/,I=/[\s-]/g;function A(e){return e.toLowerCase().replace(I," ")}var O=e.i(26999),T=e.i(48425),M=e.i(10772),$=e.i(20783),L='[cmdk-group=""]',D='[cmdk-group-items=""]',F='[cmdk-item=""]',U=`${F}:not([aria-disabled="true"])`,B="cmdk-item-select",K="data-value",z=(e,t,r)=>{var n;return n=e,function e(t,r,n,l,a,o,i){if(o===r.length)return a===t.length?1:.99;var s=`${a},${o}`;if(void 0!==i[s])return i[s];for(var u,c,d,f,m=l.charAt(o),p=n.indexOf(m,a),h=0;p>=0;)(u=e(t,r,n,l,p+1,o+1,i))>h&&(p===a?u*=1:P.test(t.charAt(p-1))?(u*=.8,(d=t.slice(a,p-1).match(_))&&a>0&&(u*=Math.pow(.999,d.length))):R.test(t.charAt(p-1))?(u*=.9,(f=t.slice(a,p-1).match(I))&&a>0&&(u*=Math.pow(.999,f.length))):(u*=.17,a>0&&(u*=Math.pow(.999,p-a))),t.charAt(p)!==r.charAt(o)&&(u*=.9999)),(u<.1&&n.charAt(p-1)===l.charAt(o+1)||l.charAt(o+1)===l.charAt(o)&&n.charAt(p-1)!==l.charAt(o))&&.1*(c=e(t,r,n,l,p+1,o+2,i))>u&&(u=.1*c),u>h&&(h=u),p=n.indexOf(m,p+1);return i[s]=h,h}(n=r&&r.length>0?`${n+" "+r.join(" ")}`:n,t,A(n),A(t),0,0,{})},V=r.createContext(void 0),q=r.createContext(void 0),W=r.createContext(void 0),G=r.forwardRef((e,t)=>{let n=en(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),l=en(()=>new Set),a=en(()=>new Map),o=en(()=>new Map),i=en(()=>new Set),s=et(e),{label:u,children:c,value:d,onValueChange:f,filter:m,shouldFilter:p,loop:h,disablePointerSelection:g=!1,vimBindings:v=!0,...x}=e,y=(0,M.useId)(),b=(0,M.useId)(),k=(0,M.useId)(),j=r.useRef(null),w=eo();er(()=>{if(void 0!==d){let e=d.trim();n.current.value=e,E.emit()}},[d]),er(()=>{w(6,R)},[]);let E=r.useMemo(()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var l,a,o,i;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)_(),N(),w(1,P);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(k);e?e.focus():null==(l=document.getElementById(y))||l.focus()}if(w(7,()=>{var e;n.current.selectedItemId=null==(e=I())?void 0:e.id,E.emit()}),r||w(5,R),(null==(a=s.current)?void 0:a.value)!==void 0){null==(i=(o=s.current).onValueChange)||i.call(o,null!=t?t:"");return}}E.emit()}},emit:()=>{i.current.forEach(e=>e())}}),[]),C=r.useMemo(()=>({value:(e,t,r)=>{var l;t!==(null==(l=o.current.get(e))?void 0:l.value)&&(o.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,S(t,r)),w(2,()=>{N(),E.emit()}))},item:(e,t)=>(l.current.add(e),t&&(a.current.has(t)?a.current.get(t).add(e):a.current.set(t,new Set([e]))),w(3,()=>{_(),N(),n.current.value||P(),E.emit()}),()=>{o.current.delete(e),l.current.delete(e),n.current.filtered.items.delete(e);let t=I();w(4,()=>{_(),(null==t?void 0:t.getAttribute("id"))===e&&P(),E.emit()})}),group:e=>(a.current.has(e)||a.current.set(e,new Set),()=>{o.current.delete(e),a.current.delete(e)}),filter:()=>s.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:y,inputId:k,labelId:b,listInnerRef:j}),[]);function S(e,t){var r,l;let a=null!=(l=null==(r=s.current)?void 0:r.filter)?l:z;return e?a(e,n.current.search,t):0}function N(){if(!n.current.search||!1===s.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(r=>{let n=a.current.get(r),l=0;n.forEach(t=>{l=Math.max(e.get(t),l)}),t.push([r,l])});let r=j.current;A().sort((t,r)=>{var n,l;let a=t.getAttribute("id"),o=r.getAttribute("id");return(null!=(n=e.get(o))?n:0)-(null!=(l=e.get(a))?l:0)}).forEach(e=>{let t=e.closest(D);t?t.appendChild(e.parentElement===t?e:e.closest(`${D} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${D} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=j.current)?void 0:t.querySelector(`${L}[${K}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function P(){let e=A().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(K);E.setState("value",t||void 0)}function _(){var e,t,r,i;if(!n.current.search||!1===s.current.shouldFilter){n.current.filtered.count=l.current.size;return}n.current.filtered.groups=new Set;let u=0;for(let a of l.current){let l=S(null!=(t=null==(e=o.current.get(a))?void 0:e.value)?t:"",null!=(i=null==(r=o.current.get(a))?void 0:r.keywords)?i:[]);n.current.filtered.items.set(a,l),l>0&&u++}for(let[e,t]of a.current)for(let r of t)if(n.current.filtered.items.get(r)>0){n.current.filtered.groups.add(e);break}n.current.filtered.count=u}function R(){var e,t,r;let n=I();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(L))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function I(){var e;return null==(e=j.current)?void 0:e.querySelector(`${F}[aria-selected="true"]`)}function A(){var e;return Array.from((null==(e=j.current)?void 0:e.querySelectorAll(U))||[])}function O(e){let t=A()[e];t&&E.setState("value",t.getAttribute(K))}function $(e){var t;let r=I(),n=A(),l=n.findIndex(e=>e===r),a=n[l+e];null!=(t=s.current)&&t.loop&&(a=l+e<0?n[n.length-1]:l+e===n.length?n[0]:n[l+e]),a&&E.setState("value",a.getAttribute(K))}function W(e){let t=I(),r=null==t?void 0:t.closest(L),n;for(;r&&!n;)n=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,L):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,L))?void 0:r.querySelector(U);n?E.setState("value",n.getAttribute(K)):$(e)}let G=()=>O(A().length-1),H=e=>{e.preventDefault(),e.metaKey?G():e.altKey?W(1):$(1)},Q=e=>{e.preventDefault(),e.metaKey?O(0):e.altKey?W(-1):$(-1)};return r.createElement(T.Primitive.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=x.onKeyDown)||t.call(x,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!(e.defaultPrevented||r))switch(e.key){case"n":case"j":v&&e.ctrlKey&&H(e);break;case"ArrowDown":H(e);break;case"p":case"k":v&&e.ctrlKey&&Q(e);break;case"ArrowUp":Q(e);break;case"Home":e.preventDefault(),O(0);break;case"End":e.preventDefault(),G();break;case"Enter":{e.preventDefault();let t=I();if(t){let e=new Event(B);t.dispatchEvent(e)}}}}},r.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:es},u),ei(e,e=>r.createElement(q.Provider,{value:E},r.createElement(V.Provider,{value:C},e))))}),H=r.forwardRef((e,t)=>{var n,l;let a=(0,M.useId)(),o=r.useRef(null),i=r.useContext(W),s=r.useContext(V),u=et(e),c=null!=(l=null==(n=u.current)?void 0:n.forceMount)?l:null==i?void 0:i.forceMount;er(()=>{if(!c)return s.item(a,null==i?void 0:i.id)},[c]);let d=ea(a,o,[e.value,e.children,o],e.keywords),f=r.useContext(q),m=el(e=>e.value&&e.value===d.current),p=el(e=>!!c||!1===s.filter()||!e.search||e.filtered.items.get(a)>0);function h(){var e,t;g(),null==(t=(e=u.current).onSelect)||t.call(e,d.current)}function g(){f.setState("value",d.current,!0)}if(r.useEffect(()=>{let t=o.current;if(!(!t||e.disabled))return t.addEventListener(B,h),()=>t.removeEventListener(B,h)},[p,e.onSelect,e.disabled]),!p)return null;let{disabled:v,value:x,onSelect:y,forceMount:b,keywords:k,...j}=e;return r.createElement(T.Primitive.div,{ref:(0,$.composeRefs)(o,t),...j,id:a,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!m,"data-disabled":!!v,"data-selected":!!m,onPointerMove:v||s.getDisablePointerSelection()?void 0:g,onClick:v?void 0:h},e.children)}),Q=r.forwardRef((e,t)=>{let{heading:n,children:l,forceMount:a,...o}=e,i=(0,M.useId)(),s=r.useRef(null),u=r.useRef(null),c=(0,M.useId)(),d=r.useContext(V),f=el(e=>!!a||!1===d.filter()||!e.search||e.filtered.groups.has(i));er(()=>d.group(i),[]),ea(i,s,[e.value,e.heading,u]);let m=r.useMemo(()=>({id:i,forceMount:a}),[a]);return r.createElement(T.Primitive.div,{ref:(0,$.composeRefs)(s,t),...o,"cmdk-group":"",role:"presentation",hidden:!f||void 0},n&&r.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),ei(e,e=>r.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},r.createElement(W.Provider,{value:m},e))))}),X=r.forwardRef((e,t)=>{let{alwaysRender:n,...l}=e,a=r.useRef(null),o=el(e=>!e.search);return n||o?r.createElement(T.Primitive.div,{ref:(0,$.composeRefs)(a,t),...l,"cmdk-separator":"",role:"separator"}):null}),Z=r.forwardRef((e,t)=>{let{onValueChange:n,...l}=e,a=null!=e.value,o=r.useContext(q),i=el(e=>e.search),s=el(e=>e.selectedItemId),u=r.useContext(V);return r.useEffect(()=>{null!=e.value&&o.setState("search",e.value)},[e.value]),r.createElement(T.Primitive.input,{ref:t,...l,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":s,id:u.inputId,type:"text",value:a?e.value:i,onChange:e=>{a||o.setState("search",e.target.value),null==n||n(e.target.value)}})}),J=r.forwardRef((e,t)=>{let{children:n,label:l="Suggestions",...a}=e,o=r.useRef(null),i=r.useRef(null),s=el(e=>e.selectedItemId),u=r.useContext(V);return r.useEffect(()=>{if(i.current&&o.current){let e=i.current,t=o.current,r,n=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return n.observe(e),()=>{cancelAnimationFrame(r),n.unobserve(e)}}},[]),r.createElement(T.Primitive.div,{ref:(0,$.composeRefs)(o,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":l,id:u.listId},ei(e,e=>r.createElement("div",{ref:(0,$.composeRefs)(i,u.listInnerRef),"cmdk-list-sizer":""},e)))}),Y=r.forwardRef((e,t)=>{let{open:n,onOpenChange:l,overlayClassName:a,contentClassName:o,container:i,...s}=e;return r.createElement(O.Root,{open:n,onOpenChange:l},r.createElement(O.Portal,{container:i},r.createElement(O.Overlay,{"cmdk-overlay":"",className:a}),r.createElement(O.Content,{"aria-label":e.label,"cmdk-dialog":"",className:o},r.createElement(G,{ref:t,...s}))))}),ee=Object.assign(G,{List:J,Item:H,Input:Z,Group:Q,Separator:X,Dialog:Y,Empty:r.forwardRef((e,t)=>el(e=>0===e.filtered.count)?r.createElement(T.Primitive.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:r.forwardRef((e,t)=>{let{progress:n,children:l,label:a="Loading...",...o}=e;return r.createElement(T.Primitive.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},ei(e,e=>r.createElement("div",{"aria-hidden":!0},e)))})});function et(e){let t=r.useRef(e);return er(()=>{t.current=e}),t}var er="u"<typeof window?r.useEffect:r.useLayoutEffect;function en(e){let t=r.useRef();return void 0===t.current&&(t.current=e()),t}function el(e){let t=r.useContext(q),n=()=>e(t.snapshot());return r.useSyncExternalStore(t.subscribe,n,n)}function ea(e,t,n,l=[]){let a=r.useRef(),o=r.useContext(V);return er(()=>{var r;let i=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),s=l.map(e=>e.trim());o.value(e,i,s),null==(r=t.current)||r.setAttribute(K,i),a.current=i}),a}var eo=()=>{let[e,t]=r.useState(),n=en(()=>new Map);return er(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function ei({asChild:e,children:t},n){let l;return e&&r.isValidElement(t)?r.cloneElement("function"==typeof(l=t.type)?l(t.props):"render"in l?l.render(t.props):t,{ref:t.ref},n(t.props.children)):n(t)}var es={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},eu=e.i(54943),eu=eu,ec=e.i(76639);function ed({className:e,...r}){return(0,t.jsx)(ee,{"data-slot":"command",className:(0,x.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...r})}function ef({title:e="Command Palette",description:r="Search for a command to run...",children:n,className:l,showCloseButton:a=!0,...o}){return(0,t.jsxs)(ec.Dialog,{...o,children:[(0,t.jsxs)(ec.DialogHeader,{className:"sr-only",children:[(0,t.jsx)(ec.DialogTitle,{children:e}),(0,t.jsx)(ec.DialogDescription,{children:r})]}),(0,t.jsx)(ec.DialogContent,{className:(0,x.cn)("overflow-hidden p-0",l),showCloseButton:a,children:(0,t.jsx)(ed,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:n})})]})}function em({className:e,...r}){return(0,t.jsxs)("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[(0,t.jsx)(eu.default,{className:"size-4 shrink-0 opacity-50"}),(0,t.jsx)(ee.Input,{"data-slot":"command-input",className:(0,x.cn)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...r})]})}function ep({className:e,...r}){return(0,t.jsx)(ee.List,{"data-slot":"command-list",className:(0,x.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...r})}function eh({...e}){return(0,t.jsx)(ee.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function eg({className:e,...r}){return(0,t.jsx)(ee.Group,{"data-slot":"command-group",className:(0,x.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...r})}function ev({className:e,...r}){return(0,t.jsx)(ee.Item,{"data-slot":"command-item",className:(0,x.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}var ex=e.i(7471);let ey={task:a.Target,memory:o.Brain,reminder:i.Calendar,person:s.Users,project:u.FolderOpen},eb={task:"/tasks",memory:"/memory",reminder:"/calendar",person:"/people",project:"/projects"};function ek({open:e,onOpenChange:n}){let a=(0,l.useRouter)(),[o,i]=(0,r.useState)([]),[s,u]=(0,r.useState)(""),c=(0,r.useCallback)(async e=>{if(!e.trim())return void i([]);let t=`%${e}%`,[r,n,l,a,o]=await Promise.all([ex.supabase.from("mc_tasks").select("id, title, status").ilike("title",t).limit(5),ex.supabase.from("mc_memories").select("id, content, category").ilike("content",t).limit(5),ex.supabase.from("mc_reminders").select("id, title, type").ilike("title",t).limit(5),ex.supabase.from("mc_people").select("id, name, company").ilike("name",t).limit(5),ex.supabase.from("mc_projects").select("id, name, status").ilike("name",t).limit(5)]);i([...(r.data||[]).map(e=>({type:"task",id:e.id,title:e.title,subtitle:`Task \xb7 ${e.status}`})),...(n.data||[]).map(e=>({type:"memory",id:e.id,title:e.content.slice(0,80),subtitle:`Memory \xb7 ${e.category}`})),...(l.data||[]).map(e=>({type:"reminder",id:e.id,title:e.title,subtitle:`${e.type}`})),...(a.data||[]).map(e=>({type:"person",id:e.id,title:e.name,subtitle:e.company||"Person"})),...(o.data||[]).map(e=>({type:"project",id:e.id,title:e.name,subtitle:`Project \xb7 ${e.status}`}))])},[]);return(0,r.useEffect)(()=>{let e=setTimeout(()=>c(s),200);return()=>clearTimeout(e)},[s,c]),(0,t.jsxs)(ef,{open:e,onOpenChange:n,children:[(0,t.jsx)(em,{placeholder:"Search tasks, memories, people, projects...",value:s,onValueChange:u}),(0,t.jsxs)(ep,{children:[(0,t.jsx)(eh,{children:"No results found."}),o.length>0&&(0,t.jsx)(eg,{heading:"Results",children:o.map(e=>{let r=ey[e.type];return(0,t.jsxs)(ev,{onSelect:()=>{n(!1),a.push(eb[e.type])},className:"flex items-center gap-3 cursor-pointer",children:[(0,t.jsx)(r,{className:"w-4 h-4 text-muted-foreground shrink-0"}),(0,t.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,t.jsx)("span",{className:"text-sm truncate",children:e.title}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.subtitle})]})]},`${e.type}-${e.id}`)})})]})]})}function ej({children:e}){let[n,l]=(0,r.useState)(!1),[a,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),l(!0))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),(0,t.jsx)(y.TooltipProvider,{children:(0,t.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)(k,{})}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:()=>o(!1)}),(0,t.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 md:hidden animate-in slide-in-from-left duration-200",children:(0,t.jsx)(k,{onNavigate:()=>o(!1)})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,t.jsx)(N,{onOpenSearch:()=>l(!0),onToggleSidebar:()=>o(e=>!e)}),(0,t.jsx)("main",{className:"flex-1 overflow-auto p-4 md:p-6",children:e})]}),(0,t.jsx)(ek,{open:n,onOpenChange:l})]})})}e.s(["AppShell",()=>ej],44787)}]);